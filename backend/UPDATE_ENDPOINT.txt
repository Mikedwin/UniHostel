// ONE-TIME UPDATE ENDPOINT - DELETE AFTER USE
// Add this temporarily to server.js, then remove it

app.get('/update-subaccount-now', async (req, res) => {
  try {
    const User = require('./models/User');
    
    const manager = await User.findOne({ 
      email: '3mikedwin@gmail.com', 
      role: 'manager' 
    });

    if (!manager) {
      return res.json({ error: 'Manager not found' });
    }

    manager.paystackSubaccountCode = 'ACCT_os10xo60waln5n7';
    manager.payoutEnabled = true;
    await manager.save();

    res.json({ 
      success: true,
      message: 'âœ… Subaccount updated successfully!',
      manager: {
        name: manager.name,
        email: manager.email,
        subaccountCode: manager.paystackSubaccountCode,
        payoutEnabled: manager.payoutEnabled
      }
    });
  } catch (error) {
    res.json({ error: error.message });
  }
});
